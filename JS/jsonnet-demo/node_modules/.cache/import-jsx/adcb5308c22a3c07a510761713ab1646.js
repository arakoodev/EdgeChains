const React = require('react');
const ms = require('ms');
const importJSX = require('@isaacs/import-jsx');
const {
  useStdout,
  Box,
  Text
} = require('ink');
const Parser = require('tap-parser');
const chalk = require('chalk');

// Pull in all the tags here so we can re-export them
const AssertCounts = importJSX('./assert-counts.js');
const AssertName = importJSX('./assert-name.js');
const Counts = importJSX('./counts.js');
const Footer = importJSX('./footer.js');
const Log = importJSX('./log.js');
const PassFail = importJSX('./pass-fail.js');
const Result = importJSX('./result.js');
const Runs = importJSX('./runs.js');
const StatusMark = importJSX('./status-mark.js');
const SuiteCounts = importJSX('./suite-counts.js');
const Summary = importJSX('./summary.js');
const TestPoint = importJSX('./test-point.js');
const Test = importJSX('./test.js');
class Base extends React.Component {
  get Summary() {
    return Summary;
  }
  get Runs() {
    return Runs;
  }
  get Log() {
    return Log;
  }
  get Footer() {
    return Footer;
  }
  constructor({
    tap
  }) {
    super();
    this.mounted = false;
    this.state = {
      // the stuff in the static section.  most importantly, errors in
      // real time, but also console output, test summaries, etc.
      log: [],
      // all tests, done and queued
      tests: [],
      // currently running
      runs: [],
      // tap.results at the end
      results: null,
      // counts of all relevant test points
      // debounced on this.assertCounts
      assertCounts: {
        total: 0,
        pass: 0,
        fail: 0,
        skip: 0,
        todo: 0
      },
      // a count of all the test suites run
      suiteCounts: {
        total: 0,
        pass: 0,
        fail: 0,
        skip: 0,
        todo: 0
      },
      // total elapsed time
      time: 0,
      bailout: null
    };
    this.start = Date.now();
    this.timer = setInterval(() => this.setState(prevState => ({
      ...prevState,
      time: this.time,
      assertCounts: this.assertCounts
    })), 200);

    // keep counters on the object itself, to debounce
    this.assertCounts = {
      total: 0,
      pass: 0,
      fail: 0,
      skip: 0,
      todo: 0
    }, this.counterBouncer = null;
    tap.on('subtestAdd', t => this.addTest(t));
    tap.on('subtestStart', t => this.startTest(t));
    tap.on('subtestEnd', t => this.endTest(t));
    tap.on('end', () => this.endAll(tap));
    tap.once('bailout', message => this.bailout(message));

    // Handle data that might come out of the tap object itself.
    tap.on('extra', this.onRaw(tap, 1));
    tap.parser.on('result', res => {
      if (res.fullname === 'TAP') {
        this.logRes(tap, res);
        this.inc(res.todo ? 'todo' : res.skip ? 'skip' : res.ok ? 'pass' : 'fail');
      }
    });

    // consume the text stream, but ignore it.
    // we get all we need from the child test objects.
    this.tapResume(tap);
  }
  tapResume(tap) {
    tap.resume();
  }
  get time() {
    return Date.now() - this.start;
  }
  componentDidMount() {
    this.mounted = true;
  }
  componentWillUnmount() {
    this.mounted = false;
    clearTimeout(this.counterBouncer);
    clearInterval(this.timer);
  }
  bailout(bailout, test = null) {
    this.bailedOut = bailout;
    return this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      runs: test ? prevState.runs.filter(t => t.childId !== test.childId) : [],
      // if we bail out, then we should only show the bailout,
      // or the counts get confusing, because we never receive a testEnd
      // for the other ones.
      tests: prevState.tests.filter(t => test ? t.childId === test.childId : t.results && t.results.bailout === bailout),
      bailout,
      assertCounts: this.assertCounts,
      time: this.time
    });
  }
  inc(type) {
    this.assertCounts.total++;
    this.assertCounts[type]++;
    if (this.counterBouncer) return;
    this.counterBouncer = setTimeout(() => {
      this.counterBouncer = null;
      this.setState(prevState => ({
        ...prevState,
        assertCounts: this.assertCounts
      }));
    }, 50);
  }
  addTest(test) {
    this.setState(prevState => ({
      ...prevState,
      tests: prevState.tests.concat(test),
      suiteCounts: {
        ...prevState.suiteCounts,
        total: prevState.suiteCounts.total + 1
      },
      assertCounts: this.assertCounts,
      time: this.time
    }));
    test.on('preprocess', options => options.stdio = 'pipe').on('process', proc => {
      proc.stderr.setEncoding('utf8');
      proc.stderr.on('data', this.onRaw(test, 2));
    }).parser.on('extra', this.onRaw(test, 1)).on('pass', res => this.inc('pass')).on('todo', res => (this.inc('todo'), this.logRes(test, res))).on('skip', res => (this.inc('skip'), this.logRes(test, res))).on('fail', res => (this.inc('fail'), this.logRes(test, res)));
  }
  onRaw(test, fd) {
    const p = ` ${fd}>`;
    return raw => {
      const pref = chalk.bold.dim(test.name + p + ' ');
      raw = raw.replace(/\n$/, '').replace(/^/gm, pref);
      this.setState(prevState => ({
        ...prevState,
        log: prevState.log.concat({
          raw
        }),
        assertCounts: this.assertCounts
      }));
    };
  }
  logRes(test, res) {
    res.testName = test.name;
    this.setState(prevState => ({
      ...prevState,
      log: prevState.log.concat({
        res
      }),
      assertCounts: this.assertCounts,
      time: this.time
    }));
  }
  startTest(test) {
    test.startTime = Date.now();
    test.once('bailout', message => this.bailout(message, test));
    this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      runs: prevState.runs.concat(test),
      assertCounts: this.assertCounts
    });
  }
  endTest(test) {
    test.endTime = Date.now();

    // put it in the appropriate bucket.
    // live update assertion handed by tap.parser event
    const ok = test.results && test.results.ok;
    const skip = test.options.skip && ok !== false;
    const todo = test.options.todo && ok !== false;
    const bucket = skip ? 'skip' : todo ? 'todo' : !ok ? 'fail' : 'pass';
    this.setState(prevState => prevState.bailout ? prevState : {
      ...prevState,
      log: prevState.log.concat({
        test
      }),
      runs: prevState.runs.filter(t => t.childId !== test.childId),
      suiteCounts: {
        ...prevState.suiteCounts,
        [bucket]: prevState.suiteCounts[bucket] + 1
      },
      time: this.time,
      assertCounts: this.assertCounts
    });
  }
  endAll(tap) {
    clearInterval(this.timer);
    clearInterval(this.counterBouncer);
    this.setState(prevState => ({
      ...prevState,
      results: tap.results,
      assertCounts: this.assertCounts,
      time: tap.time || this.time
    }));
  }
  render() {
    const {
      Log,
      Runs,
      Summary,
      Footer
    } = this;
    return /*#__PURE__*/React.createElement(Box, {
      flexDirection: "column"
    }, /*#__PURE__*/React.createElement(Log, {
      log: this.state.log
    }), /*#__PURE__*/React.createElement(Runs, {
      runs: this.state.runs
    }), this.state.results ? /*#__PURE__*/React.createElement(Summary, {
      tests: this.state.tests,
      results: this.state.results
    }) : /*#__PURE__*/React.createElement(Text, null), /*#__PURE__*/React.createElement(Footer, {
      suiteCounts: this.state.suiteCounts,
      assertCounts: this.state.assertCounts,
      time: this.state.time
    }));
  }
}
Base.AssertCounts = AssertCounts;
Base.AssertName = AssertName;
Base.Counts = Counts;
Base.Footer = Footer;
Base.Log = Log;
Base.PassFail = PassFail;
Base.Result = Result;
Base.Runs = Runs;
Base.StatusMark = StatusMark;
Base.SuiteCounts = SuiteCounts;
Base.Summary = Summary;
Base.TestPoint = TestPoint;
Base.Test = Test;
module.exports = Base;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJtcyIsImltcG9ydEpTWCIsInVzZVN0ZG91dCIsIkJveCIsIlRleHQiLCJQYXJzZXIiLCJjaGFsayIsIkFzc2VydENvdW50cyIsIkFzc2VydE5hbWUiLCJDb3VudHMiLCJGb290ZXIiLCJMb2ciLCJQYXNzRmFpbCIsIlJlc3VsdCIsIlJ1bnMiLCJTdGF0dXNNYXJrIiwiU3VpdGVDb3VudHMiLCJTdW1tYXJ5IiwiVGVzdFBvaW50IiwiVGVzdCIsIkJhc2UiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInRhcCIsIm1vdW50ZWQiLCJzdGF0ZSIsImxvZyIsInRlc3RzIiwicnVucyIsInJlc3VsdHMiLCJhc3NlcnRDb3VudHMiLCJ0b3RhbCIsInBhc3MiLCJmYWlsIiwic2tpcCIsInRvZG8iLCJzdWl0ZUNvdW50cyIsInRpbWUiLCJiYWlsb3V0Iiwic3RhcnQiLCJEYXRlIiwibm93IiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInNldFN0YXRlIiwicHJldlN0YXRlIiwiY291bnRlckJvdW5jZXIiLCJvbiIsInQiLCJhZGRUZXN0Iiwic3RhcnRUZXN0IiwiZW5kVGVzdCIsImVuZEFsbCIsIm9uY2UiLCJtZXNzYWdlIiwib25SYXciLCJwYXJzZXIiLCJyZXMiLCJmdWxsbmFtZSIsImxvZ1JlcyIsImluYyIsIm9rIiwidGFwUmVzdW1lIiwicmVzdW1lIiwiY29tcG9uZW50RGlkTW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJ0ZXN0IiwiYmFpbGVkT3V0IiwiZmlsdGVyIiwiY2hpbGRJZCIsInR5cGUiLCJzZXRUaW1lb3V0IiwiY29uY2F0Iiwib3B0aW9ucyIsInN0ZGlvIiwicHJvYyIsInN0ZGVyciIsInNldEVuY29kaW5nIiwiZmQiLCJwIiwicmF3IiwicHJlZiIsImJvbGQiLCJkaW0iLCJuYW1lIiwicmVwbGFjZSIsInRlc3ROYW1lIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImJ1Y2tldCIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJmbGV4RGlyZWN0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKVxuY29uc3QgbXMgPSByZXF1aXJlKCdtcycpXG5jb25zdCBpbXBvcnRKU1ggPSByZXF1aXJlKCdAaXNhYWNzL2ltcG9ydC1qc3gnKVxuY29uc3Qge3VzZVN0ZG91dCwgQm94LCBUZXh0fSA9IHJlcXVpcmUoJ2luaycpXG5jb25zdCBQYXJzZXIgPSByZXF1aXJlKCd0YXAtcGFyc2VyJylcbmNvbnN0IGNoYWxrID0gcmVxdWlyZSgnY2hhbGsnKVxuXG4vLyBQdWxsIGluIGFsbCB0aGUgdGFncyBoZXJlIHNvIHdlIGNhbiByZS1leHBvcnQgdGhlbVxuY29uc3QgQXNzZXJ0Q291bnRzID0gaW1wb3J0SlNYKCcuL2Fzc2VydC1jb3VudHMuanMnKVxuY29uc3QgQXNzZXJ0TmFtZSA9IGltcG9ydEpTWCgnLi9hc3NlcnQtbmFtZS5qcycpXG5jb25zdCBDb3VudHMgPSBpbXBvcnRKU1goJy4vY291bnRzLmpzJylcbmNvbnN0IEZvb3RlciA9IGltcG9ydEpTWCgnLi9mb290ZXIuanMnKVxuY29uc3QgTG9nID0gaW1wb3J0SlNYKCcuL2xvZy5qcycpXG5jb25zdCBQYXNzRmFpbCA9IGltcG9ydEpTWCgnLi9wYXNzLWZhaWwuanMnKVxuY29uc3QgUmVzdWx0ID0gaW1wb3J0SlNYKCcuL3Jlc3VsdC5qcycpXG5jb25zdCBSdW5zID0gaW1wb3J0SlNYKCcuL3J1bnMuanMnKVxuY29uc3QgU3RhdHVzTWFyayA9IGltcG9ydEpTWCgnLi9zdGF0dXMtbWFyay5qcycpXG5jb25zdCBTdWl0ZUNvdW50cyA9IGltcG9ydEpTWCgnLi9zdWl0ZS1jb3VudHMuanMnKVxuY29uc3QgU3VtbWFyeSA9IGltcG9ydEpTWCgnLi9zdW1tYXJ5LmpzJylcbmNvbnN0IFRlc3RQb2ludCA9IGltcG9ydEpTWCgnLi90ZXN0LXBvaW50LmpzJylcbmNvbnN0IFRlc3QgPSBpbXBvcnRKU1goJy4vdGVzdC5qcycpXG5cbmNsYXNzIEJhc2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBnZXQgU3VtbWFyeSAoKSB7XG4gICAgcmV0dXJuIFN1bW1hcnlcbiAgfVxuICBnZXQgUnVucyAoKSB7XG4gICAgcmV0dXJuIFJ1bnNcbiAgfVxuICBnZXQgTG9nICgpIHtcbiAgICByZXR1cm4gTG9nXG4gIH1cbiAgZ2V0IEZvb3RlciAoKSB7XG4gICAgcmV0dXJuIEZvb3RlclxuICB9XG5cbiAgY29uc3RydWN0b3IgKHsgdGFwIH0pIHtcbiAgICBzdXBlcigpXG5cbiAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAvLyB0aGUgc3R1ZmYgaW4gdGhlIHN0YXRpYyBzZWN0aW9uLiAgbW9zdCBpbXBvcnRhbnRseSwgZXJyb3JzIGluXG4gICAgICAvLyByZWFsIHRpbWUsIGJ1dCBhbHNvIGNvbnNvbGUgb3V0cHV0LCB0ZXN0IHN1bW1hcmllcywgZXRjLlxuICAgICAgbG9nOiBbXSxcblxuICAgICAgLy8gYWxsIHRlc3RzLCBkb25lIGFuZCBxdWV1ZWRcbiAgICAgIHRlc3RzOiBbXSxcblxuICAgICAgLy8gY3VycmVudGx5IHJ1bm5pbmdcbiAgICAgIHJ1bnM6IFtdLFxuXG4gICAgICAvLyB0YXAucmVzdWx0cyBhdCB0aGUgZW5kXG4gICAgICByZXN1bHRzOiBudWxsLFxuXG4gICAgICAvLyBjb3VudHMgb2YgYWxsIHJlbGV2YW50IHRlc3QgcG9pbnRzXG4gICAgICAvLyBkZWJvdW5jZWQgb24gdGhpcy5hc3NlcnRDb3VudHNcbiAgICAgIGFzc2VydENvdW50czoge1xuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgcGFzczogMCxcbiAgICAgICAgZmFpbDogMCxcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdG9kbzogMCxcbiAgICAgIH0sXG5cbiAgICAgIC8vIGEgY291bnQgb2YgYWxsIHRoZSB0ZXN0IHN1aXRlcyBydW5cbiAgICAgIHN1aXRlQ291bnRzOiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICBwYXNzOiAwLFxuICAgICAgICBmYWlsOiAwLFxuICAgICAgICBza2lwOiAwLFxuICAgICAgICB0b2RvOiAwLFxuICAgICAgfSxcblxuICAgICAgLy8gdG90YWwgZWxhcHNlZCB0aW1lXG4gICAgICB0aW1lOiAwLFxuXG4gICAgICBiYWlsb3V0OiBudWxsLFxuICAgIH1cblxuICAgIHRoaXMuc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzLFxuICAgIH0pKSwgMjAwKVxuXG4gICAgLy8ga2VlcCBjb3VudGVycyBvbiB0aGUgb2JqZWN0IGl0c2VsZiwgdG8gZGVib3VuY2VcbiAgICB0aGlzLmFzc2VydENvdW50cyA9IHtcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgcGFzczogMCxcbiAgICAgIGZhaWw6IDAsXG4gICAgICBza2lwOiAwLFxuICAgICAgdG9kbzogMCxcbiAgICB9LFxuICAgIHRoaXMuY291bnRlckJvdW5jZXIgPSBudWxsXG5cbiAgICB0YXAub24oJ3N1YnRlc3RBZGQnLCB0ID0+IHRoaXMuYWRkVGVzdCh0KSlcbiAgICB0YXAub24oJ3N1YnRlc3RTdGFydCcsIHQgPT4gdGhpcy5zdGFydFRlc3QodCkpXG4gICAgdGFwLm9uKCdzdWJ0ZXN0RW5kJywgdCA9PiB0aGlzLmVuZFRlc3QodCkpXG4gICAgdGFwLm9uKCdlbmQnLCAoKSA9PiB0aGlzLmVuZEFsbCh0YXApKVxuICAgIHRhcC5vbmNlKCdiYWlsb3V0JywgbWVzc2FnZSA9PiB0aGlzLmJhaWxvdXQobWVzc2FnZSkpXG5cbiAgICAvLyBIYW5kbGUgZGF0YSB0aGF0IG1pZ2h0IGNvbWUgb3V0IG9mIHRoZSB0YXAgb2JqZWN0IGl0c2VsZi5cbiAgICB0YXAub24oJ2V4dHJhJywgdGhpcy5vblJhdyh0YXAsIDEpKVxuICAgIHRhcC5wYXJzZXIub24oJ3Jlc3VsdCcsIHJlcyA9PiB7XG4gICAgICBpZiAocmVzLmZ1bGxuYW1lID09PSAnVEFQJykge1xuICAgICAgICB0aGlzLmxvZ1Jlcyh0YXAsIHJlcylcbiAgICAgICAgdGhpcy5pbmMocmVzLnRvZG8gPyAndG9kbydcbiAgICAgICAgICA6IHJlcy5za2lwID8gJ3NraXAnXG4gICAgICAgICAgOiByZXMub2sgPyAncGFzcydcbiAgICAgICAgICA6ICdmYWlsJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIGNvbnN1bWUgdGhlIHRleHQgc3RyZWFtLCBidXQgaWdub3JlIGl0LlxuICAgIC8vIHdlIGdldCBhbGwgd2UgbmVlZCBmcm9tIHRoZSBjaGlsZCB0ZXN0IG9iamVjdHMuXG4gICAgdGhpcy50YXBSZXN1bWUodGFwKVxuICB9XG5cbiAgdGFwUmVzdW1lICh0YXApIHtcbiAgICB0YXAucmVzdW1lKClcbiAgfVxuXG4gIGdldCB0aW1lICgpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLm1vdW50ZWQgPSB0cnVlXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgdGhpcy5tb3VudGVkID0gZmFsc2VcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jb3VudGVyQm91bmNlcilcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpXG4gIH1cblxuICBiYWlsb3V0IChiYWlsb3V0LCB0ZXN0ID0gbnVsbCkge1xuICAgIHRoaXMuYmFpbGVkT3V0ID0gYmFpbG91dFxuICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiBwcmV2U3RhdGUuYmFpbG91dCA/IHByZXZTdGF0ZSA6ICh7XG4gICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICBydW5zOiB0ZXN0ID8gcHJldlN0YXRlLnJ1bnMuZmlsdGVyKHQgPT4gdC5jaGlsZElkICE9PSB0ZXN0LmNoaWxkSWQpIDogW10sXG4gICAgICAvLyBpZiB3ZSBiYWlsIG91dCwgdGhlbiB3ZSBzaG91bGQgb25seSBzaG93IHRoZSBiYWlsb3V0LFxuICAgICAgLy8gb3IgdGhlIGNvdW50cyBnZXQgY29uZnVzaW5nLCBiZWNhdXNlIHdlIG5ldmVyIHJlY2VpdmUgYSB0ZXN0RW5kXG4gICAgICAvLyBmb3IgdGhlIG90aGVyIG9uZXMuXG4gICAgICB0ZXN0czogcHJldlN0YXRlLnRlc3RzLmZpbHRlcih0ID0+XG4gICAgICAgIHRlc3QgPyB0LmNoaWxkSWQgPT09IHRlc3QuY2hpbGRJZCA6XG4gICAgICAgIHQucmVzdWx0cyAmJiB0LnJlc3VsdHMuYmFpbG91dCA9PT0gYmFpbG91dCksXG4gICAgICBiYWlsb3V0LFxuICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICAgIHRpbWU6IHRoaXMudGltZSxcbiAgICB9KSlcbiAgfVxuXG4gIGluYyAodHlwZSkge1xuICAgIHRoaXMuYXNzZXJ0Q291bnRzLnRvdGFsKytcbiAgICB0aGlzLmFzc2VydENvdW50c1t0eXBlXSsrXG4gICAgaWYgKHRoaXMuY291bnRlckJvdW5jZXIpXG4gICAgICByZXR1cm5cbiAgICB0aGlzLmNvdW50ZXJCb3VuY2VyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvdW50ZXJCb3VuY2VyID0gbnVsbFxuICAgICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzXG4gICAgICB9KSlcbiAgICB9LCA1MClcbiAgfVxuXG4gIGFkZFRlc3QgKHRlc3QpIHtcbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgdGVzdHM6IHByZXZTdGF0ZS50ZXN0cy5jb25jYXQodGVzdCksXG4gICAgICBzdWl0ZUNvdW50czoge1xuICAgICAgICAuLi5wcmV2U3RhdGUuc3VpdGVDb3VudHMsXG4gICAgICAgIHRvdGFsOiBwcmV2U3RhdGUuc3VpdGVDb3VudHMudG90YWwgKyAxLFxuICAgICAgfSxcbiAgICAgIGFzc2VydENvdW50czogdGhpcy5hc3NlcnRDb3VudHMsXG4gICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgfSkpXG5cbiAgICB0ZXN0XG4gICAgICAub24oJ3ByZXByb2Nlc3MnLCBvcHRpb25zID0+IG9wdGlvbnMuc3RkaW8gPSAncGlwZScpXG4gICAgICAub24oJ3Byb2Nlc3MnLCBwcm9jID0+IHtcbiAgICAgICAgcHJvYy5zdGRlcnIuc2V0RW5jb2RpbmcoJ3V0ZjgnKVxuICAgICAgICBwcm9jLnN0ZGVyci5vbignZGF0YScsIHRoaXMub25SYXcodGVzdCwgMikpXG4gICAgICB9KVxuICAgICAgLnBhcnNlclxuICAgICAgICAub24oJ2V4dHJhJywgdGhpcy5vblJhdyh0ZXN0LCAxKSlcbiAgICAgICAgLm9uKCdwYXNzJywgcmVzID0+IHRoaXMuaW5jKCdwYXNzJykpXG4gICAgICAgIC5vbigndG9kbycsIHJlcyA9PiAodGhpcy5pbmMoJ3RvZG8nKSwgdGhpcy5sb2dSZXModGVzdCwgcmVzKSkpXG4gICAgICAgIC5vbignc2tpcCcsIHJlcyA9PiAodGhpcy5pbmMoJ3NraXAnKSwgdGhpcy5sb2dSZXModGVzdCwgcmVzKSkpXG4gICAgICAgIC5vbignZmFpbCcsIHJlcyA9PiAodGhpcy5pbmMoJ2ZhaWwnKSwgdGhpcy5sb2dSZXModGVzdCwgcmVzKSkpXG4gIH1cblxuICBvblJhdyAodGVzdCwgZmQpIHtcbiAgICBjb25zdCBwID0gYCAke2ZkfT5gXG4gICAgcmV0dXJuIHJhdyA9PiB7XG4gICAgICBjb25zdCBwcmVmID0gY2hhbGsuYm9sZC5kaW0odGVzdC5uYW1lICsgcCArICcgJylcbiAgICAgIHJhdyA9IHJhdy5yZXBsYWNlKC9cXG4kLywgJycpLnJlcGxhY2UoL14vZ20sIHByZWYpXG4gICAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgICAuLi5wcmV2U3RhdGUsXG4gICAgICAgIGxvZzogcHJldlN0YXRlLmxvZy5jb25jYXQoe3Jhd30pLFxuICAgICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzLFxuICAgICAgfSkpXG4gICAgfVxuICB9XG5cbiAgbG9nUmVzICh0ZXN0LCByZXMpIHtcbiAgICByZXMudGVzdE5hbWUgPSB0ZXN0Lm5hbWVcbiAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgbG9nOiBwcmV2U3RhdGUubG9nLmNvbmNhdCh7cmVzfSksXG4gICAgICBhc3NlcnRDb3VudHM6IHRoaXMuYXNzZXJ0Q291bnRzLFxuICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgIH0pKVxuICB9XG5cbiAgc3RhcnRUZXN0ICh0ZXN0KSB7XG4gICAgdGVzdC5zdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGVzdC5vbmNlKCdiYWlsb3V0JywgbWVzc2FnZSA9PiB0aGlzLmJhaWxvdXQobWVzc2FnZSwgdGVzdCkpXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gcHJldlN0YXRlLmJhaWxvdXQgPyBwcmV2U3RhdGUgOiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgcnVuczogcHJldlN0YXRlLnJ1bnMuY29uY2F0KHRlc3QpLFxuICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICB9KSlcbiAgfVxuXG4gIGVuZFRlc3QgKHRlc3QpIHtcbiAgICB0ZXN0LmVuZFRpbWUgPSBEYXRlLm5vdygpXG5cbiAgICAvLyBwdXQgaXQgaW4gdGhlIGFwcHJvcHJpYXRlIGJ1Y2tldC5cbiAgICAvLyBsaXZlIHVwZGF0ZSBhc3NlcnRpb24gaGFuZGVkIGJ5IHRhcC5wYXJzZXIgZXZlbnRcbiAgICBjb25zdCBvayA9IHRlc3QucmVzdWx0cyAmJiB0ZXN0LnJlc3VsdHMub2tcbiAgICBjb25zdCBza2lwID0gdGVzdC5vcHRpb25zLnNraXAgJiYgb2sgIT09IGZhbHNlXG4gICAgY29uc3QgdG9kbyA9IHRlc3Qub3B0aW9ucy50b2RvICYmIG9rICE9PSBmYWxzZVxuICAgIGNvbnN0IGJ1Y2tldCA9XG4gICAgICBza2lwID8gJ3NraXAnXG4gICAgICA6IHRvZG8gPyAndG9kbydcbiAgICAgIDogIW9rID8gJ2ZhaWwnXG4gICAgICA6ICdwYXNzJ1xuXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gcHJldlN0YXRlLmJhaWxvdXQgPyBwcmV2U3RhdGUgOiAoe1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgbG9nOiBwcmV2U3RhdGUubG9nLmNvbmNhdCh7dGVzdH0pLFxuICAgICAgcnVuczogcHJldlN0YXRlLnJ1bnMuZmlsdGVyKHQgPT4gdC5jaGlsZElkICE9PSB0ZXN0LmNoaWxkSWQpLFxuICAgICAgc3VpdGVDb3VudHM6IHtcbiAgICAgICAgLi4ucHJldlN0YXRlLnN1aXRlQ291bnRzLFxuICAgICAgICBbYnVja2V0XTogcHJldlN0YXRlLnN1aXRlQ291bnRzW2J1Y2tldF0gKyAxLFxuICAgICAgfSxcbiAgICAgIHRpbWU6IHRoaXMudGltZSxcbiAgICAgIGFzc2VydENvdW50czogdGhpcy5hc3NlcnRDb3VudHMsXG4gICAgfSkpXG4gIH1cblxuICBlbmRBbGwgKHRhcCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcilcbiAgICBjbGVhckludGVydmFsKHRoaXMuY291bnRlckJvdW5jZXIpXG4gICAgdGhpcy5zZXRTdGF0ZShwcmV2U3RhdGUgPT4gKHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIHJlc3VsdHM6IHRhcC5yZXN1bHRzLFxuICAgICAgYXNzZXJ0Q291bnRzOiB0aGlzLmFzc2VydENvdW50cyxcbiAgICAgIHRpbWU6IHRhcC50aW1lIHx8IHRoaXMudGltZSxcbiAgICB9KSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge0xvZywgUnVucywgU3VtbWFyeSwgRm9vdGVyfSA9IHRoaXNcbiAgICByZXR1cm4gKDxCb3ggZmxleERpcmVjdGlvbj1cImNvbHVtblwiPlxuICAgICAgPExvZyBsb2c9e3RoaXMuc3RhdGUubG9nfSAvPlxuICAgICAgPFJ1bnMgcnVucz17dGhpcy5zdGF0ZS5ydW5zfSAvPntcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0cyA/IChcbiAgICAgICAgPFN1bW1hcnlcbiAgICAgICAgICB0ZXN0cz17dGhpcy5zdGF0ZS50ZXN0c31cbiAgICAgICAgICByZXN1bHRzPXt0aGlzLnN0YXRlLnJlc3VsdHN9IC8+XG4gICAgICAgICkgOiA8VGV4dD48L1RleHQ+XG4gICAgICB9PEZvb3RlclxuICAgICAgICBzdWl0ZUNvdW50cz17dGhpcy5zdGF0ZS5zdWl0ZUNvdW50c31cbiAgICAgICAgYXNzZXJ0Q291bnRzPXt0aGlzLnN0YXRlLmFzc2VydENvdW50c31cbiAgICAgICAgdGltZT17dGhpcy5zdGF0ZS50aW1lfSAvPlxuICAgIDwvQm94PilcbiAgfVxufVxuXG5CYXNlLkFzc2VydENvdW50cyA9IEFzc2VydENvdW50c1xuQmFzZS5Bc3NlcnROYW1lID0gQXNzZXJ0TmFtZVxuQmFzZS5Db3VudHMgPSBDb3VudHNcbkJhc2UuRm9vdGVyID0gRm9vdGVyXG5CYXNlLkxvZyA9IExvZ1xuQmFzZS5QYXNzRmFpbCA9IFBhc3NGYWlsXG5CYXNlLlJlc3VsdCA9IFJlc3VsdFxuQmFzZS5SdW5zID0gUnVuc1xuQmFzZS5TdGF0dXNNYXJrID0gU3RhdHVzTWFya1xuQmFzZS5TdWl0ZUNvdW50cyA9IFN1aXRlQ291bnRzXG5CYXNlLlN1bW1hcnkgPSBTdW1tYXJ5XG5CYXNlLlRlc3RQb2ludCA9IFRlc3RQb2ludFxuQmFzZS5UZXN0ID0gVGVz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